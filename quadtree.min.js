/* https://github.com/timohausmann/quadtree-js.git v1.2.4-retrieve-nodes */
!function(){function o(t,s,e,h){this.max_objects=s||10,this.max_levels=e||4,this.level=h||0,this.bounds=t,this.objects=[],this.nodes=[]}o.prototype.split=function(){var t=this.level+1,s=this.bounds.width/2,e=this.bounds.height/2,h=this.bounds.x,i=this.bounds.y;this.nodes[0]=new o({x:h+s,y:i,width:s,height:e},this.max_objects,this.max_levels,t),this.nodes[1]=new o({x:h,y:i,width:s,height:e},this.max_objects,this.max_levels,t),this.nodes[2]=new o({x:h,y:i+e,width:s,height:e},this.max_objects,this.max_levels,t),this.nodes[3]=new o({x:h+s,y:i+e,width:s,height:e},this.max_objects,this.max_levels,t)},o.prototype.getIndex=function(t){var s=[],e=this.bounds.x+this.bounds.width/2,h=this.bounds.y+this.bounds.height/2,i=t.y<h,o=t.x<e,n=t.x+t.width>e,d=t.y+t.height>h;return i&&n&&s.push(0),o&&i&&s.push(1),o&&d&&s.push(2),n&&d&&s.push(3),s},o.prototype.insert=function(t){var s,e=0;if(this.nodes.length)for(s=this.getIndex(t),e=0;e<s.length;e++)this.nodes[s[e]].insert(t);else if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),e=0;e<this.objects.length;e++){s=this.getIndex(this.objects[e]);for(var h=0;h<s.length;h++)this.nodes[s[h]].insert(this.objects[e])}this.objects=[]}},o.prototype.retrieve=function(t){var s=this.getIndex(t),e=this.objects,h=[];if(this.objects.length&&h.push(this),this.nodes.length)for(var i=0;i<s.length;i++)var o=this.nodes[s[i]].retrieve(t),e=e.concat(o.objects),h=h.concat(o.nodes);return{objects:e=e.filter(function(t,s){return e.indexOf(t)>=s}),nodes:h}},o.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes.length&&this.nodes[t].clear();this.nodes=[]},"undefined"!=typeof module&&void 0!==module.exports?module.exports=o:window.Quadtree=o}();